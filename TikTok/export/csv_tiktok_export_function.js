function exportTikTokToCSV(t){if(!t||t.length===0)return;const c=["Profile","TikTok","Create Date","Views","Likes","Shares","Comments","Saves"],s=t[0].userName,n=t.map(e=>{const r=`https://www.tiktok.com/@${e.userName}/video/${e.code}`;let d=new Date(e.createDate).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0});return[e.userName,r,d,e.viewCount,e.likesCount,e.shareCount,e.commentsCount,e.savesCount]}),i=[c,...n].map(e=>e.map(r=>`"${r}"`).join(";")).join(`
`),u=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");if(o.download!==void 0){const e=URL.createObjectURL(u);o.setAttribute("href",e),o.setAttribute("download",`${s} TikTok.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}chrome.runtime.onMessage.addListener((t,c,s)=>{if(t.export_click_background_tiktok&&t.export_format==="csv"){console.log("export_click_background_tiktok");let n=t.sorted_data;exportTikTokToCSV(n)}});
