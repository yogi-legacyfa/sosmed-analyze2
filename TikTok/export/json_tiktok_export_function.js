function exportTikTokToJSON(o){if(!o||o.length===0)return;const t=o[0].userName,r=o.map(e=>{const c=`https://www.tiktok.com/@${e.userName}/video/${e.code}`,u=new Date(e.createDate).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0});return{Profile:e.userName,TikTok:c,"Create Date":u,Views:e.viewCount,Likes:e.likesCount,Shares:e.shareCount,Comments:e.commentsCount,Saves:e.savesCount,Captions:e.caption}}),s=JSON.stringify(r,null,2),i=new Blob([s],{type:"application/json"}),n=document.createElement("a");if(n.download!==void 0){const e=URL.createObjectURL(i);n.setAttribute("href",e),n.setAttribute("download",`${t} TikTok.json`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}chrome.runtime.onMessage.addListener((o,t,r)=>{o.export_click_background_tiktok&&o.export_format==="json"&&exportTikTokToJSON(o.sorted_data)});
